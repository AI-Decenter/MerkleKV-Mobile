# Mosquitto Configuration for MerkleKV Mobile - Testing Environment
# Simplified configuration for reliable test execution with minimal authentication

# =============================================================================
# Network Configuration - Test Environment
# =============================================================================

# Default MQTT port (non-TLS) - accessible for testing
listener 1883 0.0.0.0
protocol mqtt

# =============================================================================
# Authentication and Authorization - Test Mode
# =============================================================================

# Allow anonymous access for testing to avoid authentication issues
allow_anonymous true

# =============================================================================
# Persistence Configuration - Lightweight for Testing
# =============================================================================

# Disable persistence for faster test execution and cleanup
persistence false

# =============================================================================
# Connection Limits and QoS - Optimized for Tests
# =============================================================================

# Increased limits for concurrent test execution
max_connections 500

# Reduced inflight messages for faster processing
max_inflight_messages 10

# Reduced queued messages for test efficiency
max_queued_messages 100

# Standard message size (1MB)
message_size_limit 1048576

# =============================================================================
# Logging Configuration - Test Debugging
# =============================================================================

# Enable stdout logging for test debugging (compatible with mosquitto 1.6)
log_dest stdout

# Comprehensive logging for test troubleshooting
log_type error
log_type warning
log_type notice
log_type information

# Enable connection debugging
connection_messages true
log_timestamp true

# =============================================================================
# Session and Keepalive Settings - Test Optimized
# =============================================================================

# Shorter keepalive for faster test cycles
max_keepalive 30

# Faster retry interval for test responsiveness
retry_interval 5

# =============================================================================
# Performance Tuning - Test Environment
# =============================================================================

# More frequent cleanup for test isolation
store_clean_interval 5

# Standard QoS handling
upgrade_outgoing_qos false

# =============================================================================
# Test-Specific Settings
# =============================================================================

# Faster client disconnect detection
retry_interval 2

# Allow quick session cleanup
autosave_interval 10

# Enable immediate message delivery for tests
queue_qos0_messages false